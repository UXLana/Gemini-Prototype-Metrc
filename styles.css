@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * GCR Design System — Shared Utility Classes
 *
 * Color values are injected as CSS custom properties via ThemeBridge (index.tsx).
 * These properties are set from the MTR Design System's useColors() hook.
 *
 * Interactive states (hover, focus, placeholder) reference CSS vars below.
 * Static colors are applied inline via useColors() in each component.
 */

@layer base {
  body {
    font-family: 'Inter', sans-serif;
  }

  *:focus-visible {
    outline: 3px solid #3086BF;
    outline-offset: 2px;
    border-radius: inherit;
  }

  input, select, textarea {
    font-size: 0.875rem !important;
    line-height: 1.25rem !important;
  }

  /* Placeholder color from theme */
  ::placeholder {
    color: var(--mtr-text-disabled-onLight) !important;
    opacity: 1;
  }
}

@layer components {

  /* ───── Theme-aware interactive utilities ───── */

  .hover-surface {
    transition: background-color 150ms;
  }
  .hover-surface:hover {
    background-color: var(--mtr-hover-onLight);
  }

  .hover-surface-subtle {
    transition: background-color 150ms;
  }
  .hover-surface-subtle:hover {
    background-color: var(--mtr-surface-lightDarker);
  }

  .focus-brand:focus {
    outline: none;
    box-shadow: 0 0 0 3px #3086BF;
  }

  /* ───── Form elements ───── */

  .form-label {
    @apply block text-xs font-medium
           tracking-[0.2px] mb-1.5;
  }

  .form-input {
    @apply w-full px-3 py-2 border
           rounded-md !text-sm !leading-5
           outline-none
           transition-colors;
  }
  .form-input:focus {
    box-shadow: 0 0 0 1px var(--mtr-brand-default);
    border-color: var(--mtr-brand-default);
  }

  .form-select {
    @apply w-full px-3 py-2 border
           rounded-md !text-sm !leading-5 appearance-none
           outline-none
           transition-colors;
  }
  .form-select:focus {
    box-shadow: 0 0 0 1px var(--mtr-brand-default);
    border-color: var(--mtr-brand-default);
  }

  /* ───── Tab overrides ───── */

  [role="tab"] {
    border-radius: 6px !important;
    margin-bottom: 4px !important;
    padding-top: 8px !important;
    padding-bottom: 8px !important;
    height: auto !important;
  }

  [role="tab"][aria-selected="true"] > span:last-child {
    height: 2px !important;
    border-radius: 1px !important;
    bottom: -4px !important;
  }

  /* ───── Card surfaces ───── */

  .card {
    @apply border rounded-2xl transition-colors;
  }

  /* ───── Badges (mirrors MTR DLS Badge component) ───── */

  .badge-filled {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           rounded-lg border text-xs font-medium
           whitespace-nowrap;
  }

  .badge-outlined {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           rounded-lg border bg-transparent
           text-xs font-medium whitespace-nowrap;
  }

  .badge-subtle {
    @apply inline-flex items-center gap-1 px-2 py-0.5
           rounded-lg border border-transparent
           text-xs font-medium whitespace-nowrap;
  }

  .badge {
    @apply badge-subtle;
  }

  .badge-outline {
    @apply badge-outlined;
  }

  .badge-market {
    @apply badge-subtle
           text-[10px] font-bold border;
  }

  .badge-market-sm {
    @apply badge-subtle
           text-[10px] font-bold;
  }

  /* ───── Section labels ───── */

  .section-label {
    @apply text-[10px]
           uppercase tracking-wider font-semibold mb-2;
  }

  /* ───── Checkbox / Radio indicators ───── */

  .check-indicator {
    @apply w-4 h-4 rounded border flex items-center justify-center
           transition-colors;
  }

  .check-indicator-on {
    background-color: var(--mtr-brand-default);
    border-color: var(--mtr-brand-default);
  }

  .check-indicator-off {
    background-color: var(--mtr-surface-light);
    border-color: var(--mtr-border-midEmphasis-onLight);
  }

  /* ───── Dropdown menus ───── */

  .dropdown-menu {
    @apply absolute z-50 w-full mt-1
           border rounded-md shadow-lg;
  }

  .dropdown-item {
    @apply flex items-center px-3 py-2 cursor-pointer text-sm
           transition-colors;
  }
  .dropdown-item:hover {
    background-color: var(--mtr-hover-onLight);
  }

  .dropdown-item-selected {
    /* Colors applied inline via useColors() */
  }
}
